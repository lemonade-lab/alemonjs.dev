---
title: V2.1.20
description: 写法简化
# slug: welcome-docusaurus-v2
authors: ningmengchongshui
tags: [更新]
image: https://i.imgur.com/mErPwqL.png
hide_table_of_contents: false
---

# 更新记录

一个例子展示升级后的写法

```ts
import { useMention, useMessage, Format, createEvent } from 'alemonjs'

export default async (e, next) => {
  // 创建事件
  const event = createEvent({
    event: e,
    selects: ['message.create'],
    // 以下配置可选
    regular: /hello/, // 不设置，默认为false
    prefix: '/', // 不设置，默认为false
    exact: '/hello' // 不设置，默认为false
  })
  // 事件不匹配。或...
  if (!event.selects || !event.regular || !event.prefix || !event.exact) {
    next()
    return
  }

  const [mention] = useMention(event)
  const findUser = await mention.findOne()
  // 新增 count
  if (!findUser.count || !findUser.data) {
    return
  }

  const [message] = useMessage(event)

  const user = findUser.data

  // 链式调用
  const format = Format.create()
  format.addText(`hello, ${user.UserName || user.UserId}!`)

  // 发送消息
  message.send({
    format
  })
}
```
