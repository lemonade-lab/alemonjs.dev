(self.webpackChunkalemonjs_docs=self.webpackChunkalemonjs_docs||[]).push([[1595],{619:(e,t,n)=>{"use strict";n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>m,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var r=n(4848),a=n(8453),s=(n(1470),n(9365),n(3881));const o={sidebar_position:1},l="\u7b80\u4ecb",i={id:"intro",title:"\u7b80\u4ecb",description:"ALemonJS ( \u53d1\u97f3\u4e3a /\u0259\u02c8lem\u0259n/ ) \u57fa\u4e8e JavaScript \u6240\u6784\u5efa\u7684\u804a\u5929\u5e73\u53f0\u673a\u5668\u4eba\u5f00\u53d1\u6846\u67b6",source:"@site/docs/intro.md",sourceDirName:".",slug:"/intro",permalink:"/docs/intro",draft:!1,unlisted:!1,editUrl:"https://github.com/lemonade-lab/alemonjs-docs/docs/intro.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",next:{title:"\u5feb\u901f\u5f00\u59cb",permalink:"/docs/start"}},c={},d=[];function u(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"\u7b80\u4ecb",children:"\u7b80\u4ecb"})}),"\n",(0,r.jsx)(t.admonition,{title:"ALemonJS",type:"tip",children:(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://github.com/lemonade-lab/alemonjs",children:"ALemonJS"})," ( \u53d1\u97f3\u4e3a /\u0259\u02c8lem\u0259n/ ) \u57fa\u4e8e JavaScript \u6240\u6784\u5efa\u7684\u804a\u5929\u5e73\u53f0\u673a\u5668\u4eba\u5f00\u53d1\u6846\u67b6"]})}),"\n",(0,r.jsx)(t.p,{children:"\u5728\u672c\u6587\u4e2d\uff0c\u63cf\u8ff0ALemonJS \u90fd\u79f0\u4e3a\u201c\u6846\u67b6\u201d\u3002"}),"\n",(0,r.jsx)(t.p,{children:"\u6846\u67b6\u4e3b\u8981\u901a\u8fc7\u5b9a\u4e49\u54cd\u5e94\u51fd\u6570\u6765\u63cf\u8ff0\u4e0d\u540c\u7c7b\u578b\u7684\u4e8b\u4ef6\u5c06\u8981\u6267\u884c\u7684\u5185\u5bb9\u3002"}),"\n","\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-ts",metastring:'title="Hello Word!"',children:"import { Text, useMessage } from 'alemonjs'\n// \u521b\u5efa\u4e8b\u4ef6\u7c7b\u578b\nconst selects = onSelects(['message.create'])\n// \u5bfc\u51fa\u54cd\u5e94\nexport default onResponse(selects, event => {\n  // \u4f7f\u7528\u53d1\u9001\u51fd\u6570\n  const [message] = useMessage(event)\n  // \u53d1\u9001\u6587\u672c\n  message.send(format(Text('Hello Word!')))\n})\n"})}),"\n",(0,r.jsx)(s.A,{})]})}function m(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},7845:e=>{function t(e){return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}t.keys=()=>[],t.resolve=t,t.id=7845,e.exports=t},9365:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(6540);var r=n(4164);const a={tabItem:"tabItem_Ymn6"};var s=n(4848);function o(e){let{children:t,hidden:n,className:o}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.A)(a.tabItem,o),hidden:n,children:t})}},1470:(e,t,n)=>{"use strict";n.d(t,{A:()=>w});var r=n(6540),a=n(4164),s=n(3104),o=n(6347),l=n(205),i=n(7485),c=n(1682),d=n(679);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function m(e){const{values:t,children:n}=e;return(0,r.useMemo)((()=>{const e=t??function(e){return u(e).map((e=>{let{props:{value:t,label:n,attributes:r,default:a}}=e;return{value:t,label:n,attributes:r,default:a}}))}(n);return function(e){const t=(0,c.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[t,n])}function h(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function p(e){let{queryString:t=!1,groupId:n}=e;const a=(0,o.W6)(),s=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:t,groupId:n});return[(0,i.aZ)(s),(0,r.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(a.location.search);t.set(s,e),a.replace({...a.location,search:t.toString()})}),[s,a])]}function f(e){const{defaultValue:t,queryString:n=!1,groupId:a}=e,s=m(e),[o,i]=(0,r.useState)((()=>function(e){let{defaultValue:t,tabValues:n}=e;if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!h({value:t,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${t}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return t}const r=n.find((e=>e.default))??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:t,tabValues:s}))),[c,u]=p({queryString:n,groupId:a}),[f,x]=function(e){let{groupId:t}=e;const n=function(e){return e?`docusaurus.tab.${e}`:null}(t),[a,s]=(0,d.Dv)(n);return[a,(0,r.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:a}),b=(()=>{const e=c??f;return h({value:e,tabValues:s})?e:null})();(0,l.A)((()=>{b&&i(b)}),[b]);return{selectedValue:o,selectValue:(0,r.useCallback)((e=>{if(!h({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);i(e),u(e),x(e)}),[u,x,s]),tabValues:s}}var x=n(2303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=n(4848);function v(e){let{className:t,block:n,selectedValue:r,selectValue:o,tabValues:l}=e;const i=[],{blockElementScrollPositionUntilNextRender:c}=(0,s.a_)(),d=e=>{const t=e.currentTarget,n=i.indexOf(t),a=l[n].value;a!==r&&(c(t),o(a))},u=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const n=i.indexOf(e.currentTarget)+1;t=i[n]??i[0];break}case"ArrowLeft":{const n=i.indexOf(e.currentTarget)-1;t=i[n]??i[i.length-1];break}}t?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":n},t),children:l.map((e=>{let{value:t,label:n,attributes:s}=e;return(0,g.jsx)("li",{role:"tab",tabIndex:r===t?0:-1,"aria-selected":r===t,ref:e=>i.push(e),onKeyDown:u,onClick:d,...s,className:(0,a.A)("tabs__item",b.tabItem,s?.className,{"tabs__item--active":r===t}),children:n??t},t)}))})}function j(e){let{lazy:t,children:n,selectedValue:s}=e;const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=o.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:o.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==s})))})}function y(e){const t=f(e);return(0,g.jsxs)("div",{className:(0,a.A)("tabs-container",b.tabList),children:[(0,g.jsx)(v,{...t,...e}),(0,g.jsx)(j,{...t,...e})]})}function w(e){const t=(0,x.A)();return(0,g.jsx)(y,{...e,children:u(e.children)},String(t))}},3881:(e,t,n)=>{"use strict";n.d(t,{A:()=>C});var r=n(6540),a=n(8553);const s={minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,lineHeight:20,wordWrap:"on",automaticLayout:!0,suggestOnTriggerCharacters:!0,quickSuggestions:!0,parameterHints:{enabled:!0},hover:{enabled:!0},folding:!0,foldingStrategy:"indentation",lineNumbers:"on",selectOnLineNumbers:!0,cursorBlinking:"blink",cursorSmoothCaretAnimation:"on",tabSize:2,insertSpaces:!0,detectIndentation:!0,bracketPairColorization:{enabled:!0},autoSave:"off",readOnly:!1,contextmenu:!0,renderLineHighlight:"all",multiCursorModifier:"alt",find:{addExtraSpaceOnTop:!1,autoFindInSelection:"never",seedSearchStringFromSelection:"never"}};var o=n(4848);const l=e=>{const{disabled:t,onSave:n,value:l,language:i,width:c,height:d,onChange:u,theme:m,...h}=e,p=((e,t)=>({beforeMount:e=>{e.editor.defineTheme("zh-theme",{base:"vs-dark"===t?"vs-dark":"vs",inherit:!0,rules:[],colors:{}})},onMount:(n,r)=>{r.editor.setModelLanguage(n.getModel(),e),n.updateOptions({...s,language:e,theme:"vs-dark"===t?"vs-dark":"vs"});try{const e=(e,t,r,a)=>{n.addAction({id:e,label:t,contextMenuGroupId:a,run:e=>{e.trigger("keyboard",r,{})}})};e("zh-undo","\u64a4\u9500","undo","1_modification"),e("zh-cut","\u526a\u5207","editor.action.clipboardCutAction","1_modification"),e("zh-copy","\u590d\u5236","editor.action.clipboardCopyAction","1_modification"),e("zh-paste","\u7c98\u8d34","editor.action.clipboardPasteAction","1_modification"),e("zh-select-all","\u5168\u9009","editor.action.selectAll","9_cutcopypaste"),e("zh-redo","\u91cd\u505a","redo","1_modification"),e("zh-find","\u67e5\u627e","actions.find","4_find"),e("zh-replace","\u66ff\u6362","editor.action.startFindReplaceAction","4_find"),e("zh-find-next","\u67e5\u627e\u4e0b\u4e00\u4e2a","editor.action.nextMatchFindAction","4_find"),e("zh-find-prev","\u67e5\u627e\u4e0a\u4e00\u4e2a","editor.action.previousMatchFindAction","4_find"),e("zh-format","\u683c\u5f0f\u5316\u6587\u6863","editor.action.formatDocument","6_cc"),e("zh-format-selection","\u683c\u5f0f\u5316\u9009\u4e2d\u5185\u5bb9","editor.action.formatSelection","6_cc"),e("zh-indent","\u589e\u52a0\u7f29\u8fdb","editor.action.indentLines","2_cc"),e("zh-outdent","\u51cf\u5c11\u7f29\u8fdb","editor.action.outdentLines","2_cc"),e("zh-move-line-up","\u5411\u4e0a\u79fb\u52a8\u884c","editor.action.moveLinesUpAction","2_cc"),e("zh-move-line-down","\u5411\u4e0b\u79fb\u52a8\u884c","editor.action.moveLinesDownAction","2_cc"),e("zh-copy-line-up","\u5411\u4e0a\u590d\u5236\u884c","editor.action.copyLinesUpAction","2_cc"),e("zh-copy-line-down","\u5411\u4e0b\u590d\u5236\u884c","editor.action.copyLinesDownAction","2_cc"),e("zh-delete-line","\u5220\u9664\u884c","editor.action.deleteLines","2_cc"),e("zh-insert-line-below","\u5728\u4e0b\u65b9\u63d2\u5165\u884c","editor.action.insertLineAfter","2_cc"),e("zh-insert-line-above","\u5728\u4e0a\u65b9\u63d2\u5165\u884c","editor.action.insertLineBefore","2_cc")}catch(a){console.warn("MonacoEditor\u4e2d\u6587\u83dc\u5355\u914d\u7f6e\u5931\u8d25:",a)}},options:{...s,language:e,theme:"vs-dark"===t?"vs-dark":"vs"}}))(i,m);return(0,r.useEffect)((()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),t||n())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[t,n,l,i,c,d,u,m]),(0,o.jsx)(a.Ay,{value:l,language:i,width:c,height:d,onChange:u,theme:m,...p,...h})};var i=n(6942),c=n.n(i),d=n(6120),u=n(4353),m=n.n(u),h=n(8287),p=n(4819),f=n(9078);const x=new Map;function b(){if(x.size<=120)return;const e=Array.from(x.entries()).sort(((e,t)=>e[1].ts-t[1].ts));for(;e.length&&x.size>Math.floor(108);){const[t,n]=e.shift();URL.revokeObjectURL(n.url),x.delete(t)}}function g(e,t){try{const n=atob(e),r=n.length,a=new Uint8Array(r);for(let e=0;e<r;e++)a[e]=n.charCodeAt(e);return new Blob([a],{type:t})}catch{return new Blob}}function v(e){if(null==e)return"";if("string"==typeof e)return e;try{return JSON.stringify(e)}catch{try{return String(e)}catch{return""}}}function j(e){return"string"==typeof e&&/^https?:\/\//i.test(e)}const y={bold:e=>(0,o.jsx)("strong",{children:e}),italic:e=>(0,o.jsx)("em",{children:e}),boldItalic:e=>(0,o.jsx)("strong",{children:(0,o.jsx)("em",{children:e})}),block:e=>(0,o.jsx)("div",{className:"block",children:e}),strikethrough:e=>(0,o.jsx)("s",{children:e}),none:e=>e,default:e=>e},w={all:()=>(0,o.jsx)("strong",{children:"@\u5168\u4f53\u6210\u5458"}),everyone:()=>(0,o.jsx)("strong",{children:"@\u5168\u4f53\u6210\u5458"}),"\u5168\u4f53\u6210\u5458":()=>(0,o.jsx)("strong",{children:"@\u5168\u4f53\u6210\u5458"}),channel:e=>(0,o.jsxs)("strong",{children:["#",e]}),user:(e,t)=>(0,o.jsxs)("strong",{children:["@",t||e]}),guild:e=>(0,o.jsxs)("strong",{children:["#",e]}),default:()=>(0,o.jsx)("span",{})},k={"MD.title":e=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"text-xl font-bold",children:v(e.value).slice(0,200)}),(0,o.jsx)("br",{})]}),"MD.subtitle":e=>(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:"text-lg font-semibold",children:v(e.value).slice(0,200)}),(0,o.jsx)("br",{})]}),"MD.blockquote":e=>(0,o.jsx)("blockquote",{children:v(e.value).slice(0,500)}),"MD.bold":e=>(0,o.jsx)("strong",{className:"px-1 py-0.5 rounded-md shadow-inner",children:v(e.value).slice(0,500)}),"MD.divider":()=>(0,o.jsx)("hr",{}),"MD.text":e=>(0,o.jsx)("span",{children:v(e.value).slice(0,2e3)}),"MD.link":e=>{const t=v(e.value?.url).slice(0,1e3),n=v(e.value?.text).slice(0,200);return j(t)?(0,o.jsx)("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:n||t}):null},"MD.image":e=>{const t=v(e.value);if(!j(t))return null;const n=Number(e.options?.width)||100,r=Number(e.options?.height)||100;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(p.A,{style:{width:`${n}px`,height:`${r}px`},className:"max-w-[15rem] xl:max-w-[20rem] rounded-md",src:t,alt:"image"}),(0,o.jsx)("br",{})]})},"MD.italic":e=>(0,o.jsx)("em",{children:v(e.value).slice(0,500)}),"MD.italicStar":e=>(0,o.jsx)("em",{className:"italic",children:v(e.value).slice(0,500)}),"MD.strikethrough":e=>(0,o.jsx)("s",{children:v(e.value).slice(0,500)}),"MD.newline":()=>(0,o.jsx)("br",{}),"MD.list":e=>{const t=Array.isArray(e.value)?e.value:[];return(0,o.jsx)("ul",{className:"list-disc ml-4",children:t.slice(0,200).map(((e,t)=>{const n=v(e?.value?.text||e?.value||e).slice(0,500);return(0,o.jsx)("li",{children:n},t)}))})},"MD.template":()=>(0,o.jsx)("span",{children:"\u6682\u4e0d\u652f\u6301\u6a21\u677f"})},A={"Ark.BigCard":()=>(0,o.jsx)("div",{children:"\u6682\u4e0d\u652f\u6301 Ark.BigCard"}),"Ark.Card":()=>(0,o.jsx)("div",{children:"\u6682\u4e0d\u652f\u6301 Ark.Card"}),"Ark.list":()=>(0,o.jsx)("div",{children:"\u6682\u4e0d\u652f\u6301 Ark.list"}),ImageFile:()=>(0,o.jsx)("div",{children:"\u6682\u4e0d\u652f\u6301\u6587\u4ef6\u56fe\u7247"}),"MD.template":()=>(0,o.jsx)("div",{children:"\u6682\u4e0d\u652f\u6301"})},M=e=>{try{const n=e?.value;if(!n)return null;let r;if(Array.isArray(n))r=h.hp.from(n);else{if("string"!=typeof n)return null;{const e=(t=n)?t.length>2097152?null:t:null;if(!e)return(0,o.jsx)("span",{children:"\u56fe\u7247\u592a\u5927\u6216\u65e0\u6548"});r=h.hp.from(e,"base64")}}const a=`data:image/png;base64,${r.toString("base64")}`;return(0,o.jsx)(p.A,{className:"max-w-[15rem] xl:max-w-[20rem] rounded-md",src:a,alt:"Image"})}catch(n){return console.warn("renderImage error",n),(0,o.jsx)("span",{children:"\u56fe\u7247\u89e3\u6790\u5931\u8d25"})}var t},D=(e,t,n)=>{try{if(e?.options?.template_id)return(0,o.jsx)("div",{children:"\u6682\u4e0d\u652f\u6301\u6309\u94ae\u6a21\u677f"});const r=e?.value;return Array.isArray(r)?(0,o.jsx)("div",{className:"flex flex-col gap-3",children:r.slice(0,20).map(((e,r)=>{const a=Array.isArray(e?.value)?e.value:[];return(0,o.jsx)("div",{className:"flex flex-wrap gap-2",children:a.slice(0,30).map(((e,r)=>{const a="string"==typeof e?.value?{label:e.value,title:e.value}:e?.value||{label:"Button",title:""},s=!!e?.options?.autoEnter,l="string"==typeof e?.options?.data?{click:e.options.data}:e?.options?.data||{},i=v(a.label).slice(0,40)||"Button";return(0,o.jsx)(f.Ay,{onClick:e=>{e.stopPropagation(),e.preventDefault(),s?t(v(l.click).slice(0,2e3)):n(v(l.click).slice(0,2e3))},children:i},r)}))},r)}))}):(0,o.jsx)("div",{children:"\u6309\u94ae\u6570\u636e\u9519\u8bef"})}catch(r){return console.warn("renderButtonGroup error",r),(0,o.jsx)("div",{children:"\u6309\u94ae\u6e32\u67d3\u5931\u8d25"})}},N={Text:e=>{try{let t=v(e?.value).slice(0,5e3);if(!t)return null;const n=v(e?.options?.style)||"default",r=y[n]||y.default,a=t.split("\n"),s=a.length>1?(0,o.jsx)("span",{children:a.map(((e,t)=>(0,o.jsxs)("span",{children:[e,(0,o.jsx)("br",{})]},t)))}):t;return(0,o.jsx)("span",{children:r(s)})}catch(t){return console.warn("renderText error",t),(0,o.jsx)("span",{children:"\u6587\u672c\u9519\u8bef"})}},Mention:e=>{try{const t=v(e?.value);if(!t)return null;if(["all","everyone","\u5168\u4f53\u6210\u5458"].includes(t))return(0,o.jsx)("span",{children:w[t]?.(t)||w.all(t)});const n=v(e?.options?.belong)||"default",r=e?.options?.payload?.name,a=w[n]||w.default;return(0,o.jsx)("span",{children:a(t,r)})}catch(t){return console.warn("renderMention error",t),null}},Image:M,ImageURL:e=>{try{const t=v(e?.value);if(!t)return null;if(t.startsWith("base64://")){const e=t.replace("base64://","");return M({value:e})}return j(t)?(0,o.jsx)(p.A,{className:"max-w-[15rem] xl:max-w-[20rem] rounded-md",src:t,alt:"ImageURL"}):null}catch(t){return console.warn("renderImageURL error",t),(0,o.jsx)("span",{children:"\u56fe\u7247\u5730\u5740\u65e0\u6548"})}},ImageRef:e=>{try{const t=e?.value?.hash;if(!t)return(0,o.jsx)("span",{children:"\u56fe\u7247\u5f15\u7528\u7f3a\u5931"});const n=function(e){const t=x.get(e);if(t)return t.ts=Date.now(),t.url;try{const t=localStorage.getItem("img:"+e);if(t){const n=g(t,"image/png"),r=URL.createObjectURL(n);return x.set(e,{url:r,size:t.length,ts:Date.now()}),b(),r}}catch{}}(t);return n?(0,o.jsx)(p.A,{className:"max-w-[15rem] xl:max-w-[20rem] rounded-md",src:n,alt:"ImageRef"}):(0,o.jsx)("span",{children:"\u56fe\u7247\u5df2\u91ca\u653e"})}catch(t){return console.warn("render ImageRef error",t),(0,o.jsx)("span",{children:"\u56fe\u7247\u5f15\u7528\u9519\u8bef"})}},"BT.group":e=>(0,o.jsx)(o.Fragment,{children:D(e,(()=>{}),(()=>{}))})},S={Markdown:e=>{try{const t=Array.isArray(e?.value)?e.value:[];return(0,o.jsx)("div",{className:"mb-2",children:t.slice(0,200).map(((e,t)=>{if(!e||"object"!=typeof e)return null;const n=v(e.type),r=k[n];if(!r)return null;try{return r(e)}catch(a){return console.warn("markdown item render error",a),null}}))})}catch(t){return console.warn("renderMarkdown error",t),(0,o.jsx)("div",{children:"Markdown \u6570\u636e\u9519\u8bef"})}},"MD.title":e=>k["MD.title"](e),"MD.subtitle":e=>k["MD.subtitle"](e),"MD.blockquote":e=>k["MD.blockquote"](e),"MD.bold":e=>k["MD.bold"](e),"MD.divider":e=>k["MD.divider"](e),"MD.text":e=>k["MD.text"](e),"MD.link":e=>k["MD.link"](e),"MD.image":e=>k["MD.image"](e),"MD.italic":e=>k["MD.italic"](e),"MD.italicStar":e=>k["MD.italicStar"](e),"MD.strikethrough":e=>k["MD.strikethrough"](e),"MD.newline":e=>k["MD.newline"](e),"MD.list":e=>k["MD.list"](e)},T=e=>{let{data:t,createAt:n,onSend:a,onInput:s}=e;const l=a||(()=>{}),i=s||(()=>{}),c=(0,r.useMemo)((()=>{const e="number"==typeof n&&isFinite(n)?n:Date.now();return m()(e).format("YYYY-MM-DD HH:mm:ss")}),[n]),d=(0,r.useMemo)((()=>Array.isArray(t)?t.map(((e,t)=>{const n=(r=e,"[object Object]"===Object.prototype.toString.call(r)?e:{type:"Text",value:v(e)});var r;const a=v(n.type).trim();if(!a)return null;try{if("BT.group"===a)return(0,o.jsx)("div",{children:D(n,l,i)},t);const e=N[a];if(e)return e(n);const r=S[a];if(r)return r(n);const s=A[a];return s?s():null}catch(s){return console.warn("render item error",a,s),null}})):null),[t,l,i]);return(0,o.jsx)("div",{className:"flex items-end",children:(0,o.jsxs)("div",{className:"message-bubble rounded-md py-1 flex flex-col relative px-2 shadow-md bg-[var(--panel-background)]",children:[(0,o.jsx)("div",{children:d}),(0,o.jsx)("span",{className:"absolute -bottom-3 whitespace-nowrap right-0 text-[0.5rem]",children:c})]})})},E=(0,r.memo)(T);var L=n(2823);const _={default:"import { format, Text } from 'alemonjs';\n\nconst App = () => {\n    return format(\n        Text(\"Hello Word!\")\n    )\n}\nexport default App;",tip:"import { format, Text } from 'alemonjs';\n\nconst App = () => {\n    return format(\n        Text(\"Hello Word!\")\n    )\n}\nexport default App;",text:"import { format, Text } from 'alemonjs';\n\nconst App = () => {\n    return format(\n        Text('\u8fd9\u4e2a'),\n        Text('\u6807\u9898', { style: 'bold' }),\n        Text('\u88ab\u52a0\u7c97\u4e86')\n    )\n}\nexport default App;",mention:"import { format, Text, Mention } from 'alemonjs';\n\nconst App = () => {\n    return format(\n        Text('Hello '),\n        Mention('\u67e0\u6aac\u51b2\u6c34'),\n        Text(', How are things going?')\n    )\n}\nexport default App;",button:"import { format, BT } from 'alemonjs';\n\nconst App = () => {\n    const { group, row } = BT\n    return format(\n        group(\n            row(\n                BT('\u5f00\u59cb', '/\u5f00\u59cb\u6e38\u620f'),\n                BT('\u7ed3\u675f', '/\u7ed3\u675f\u6e38\u620f')\n            )\n        )\n    )\n}\nexport default App;",md:"import { format, MD } from 'alemonjs';\n\nconst { text, title, bold, italicStar,\n    strikethrough, link, image, blockquote,\n    divider, subtitle, italic, newline\n} = MD\n\nconst App = () => {\n    return format(\n        MD(\n            title('\u6807\u9898\uff01\uff01'),\n            subtitle('\u5b50\u6807\u9898'),\n            text('\u666e\u901a\u6587\u672c'), bold('\u52a0\u7c97'),\n            newline(),\n            italic('\u659c\u4f53'), italicStar('\u661f\u53f7\u659c\u4f53'), strikethrough('\u5220\u9664\u7ebf'),\n            image('https://www.baidu.com/img/bd_logo1.png', {\n                width: 200,\n                height: 100\n            }),\n            link('\u767e\u5ea6\u4e00\u4e0b', 'https://www.baidu.com'),\n            blockquote('\u5757\u5f15\u7528'),\n            divider()\n        )\n    )\n}\nexport default App;"};var I=n(9293);const z=e=>{let{activeKey:t,onChange:n,className:r}=e;return(0,o.jsx)("div",{className:`md:hidden flex border-b border-slate-200 dark:border-slate-800 ${r||""}`,children:(0,o.jsx)(I.A,{activeKey:t,onChange:e=>n(e),className:"w-full m-0",items:[{key:"editor",label:"\u7f16\u8f91"},{key:"preview",label:"\u9884\u89c8"}],centered:!0})})},C=e=>{let{codeKey:t,minHeight:n}=e;const[a,s]=(0,r.useState)(_[t]??_.default),[i,u]=(0,r.useState)(null),[m,h]=(0,r.useState)(null),p=(0,r.useRef)(null),[f,x]=(0,r.useState)("editor");(0,d.u)("data-theme","alemon-bubble-preview");const[b,g]=(0,r.useState)("vs");function v(){h(null);try{const e=a.trim().replace(/import\s+{[^}]*}\s+from\s+['"]alemonjs['"];?/g,"").replace(/export\s+default\s+App;?/g,""),t={...L,console:console},n=Object.keys(t),r=Object.values(t),s=`\n                "use strict";\n                ${e}\n                return App();\n            `,o=new Function(...n,s)(...r);if(!Array.isArray(o))throw new Error("App \u5fc5\u987b\u8fd4\u56de format(...) \u7684\u7ed3\u679c\uff08DataEnums[] \u6216 DataEnums[][]\uff09");let l=[];if(0===o.length)l=[];else if(Array.isArray(o[0]))l=o.filter(Array.isArray);else{if("object"!=typeof o[0]||!o[0]||!("type"in o[0]))throw new Error("\u65e0\u6cd5\u8bc6\u522b\u8fd4\u56de\u7684\u6570\u636e\u7ed3\u6784\uff0c\u8bf7\u8fd4\u56de format(...) \u7684\u7ed3\u679c\uff08DataEnums[] \u6216 DataEnums[][]\uff09");l=[o]}u(l),0===l.length&&h("\u4ee3\u7801\u6267\u884c\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u4e86\u7a7a\u7ed3\u679c")}catch(e){console.error("AlemonJS \u4ee3\u7801\u6267\u884c\u9519\u8bef:",e),u(null),h(e?.message||String(e))}}return(0,r.useEffect)((()=>{if("undefined"==typeof document)return;const e=()=>{const e=document.documentElement.getAttribute("data-theme");g("dark"===e?"vs-dark":"vs")};e();const t=new MutationObserver(e);return t.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>t.disconnect()}),[]),(0,r.useEffect)((()=>{p.current&&(p.current.scrollTop=p.current.scrollHeight)}),[i,m]),(0,r.useEffect)((()=>{v()}),[]),(0,r.useEffect)((()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&(e.preventDefault(),v())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[a]),(0,o.jsx)("div",{id:"alemon-bubble-preview",className:"font-sans ",children:(0,o.jsxs)("div",{className:"max-w-7xl mx-auto bg-white dark:bg-slate-900 rounded-xl shadow-lg overflow-hidden flex flex-col min-h-[18rem]",style:{minHeight:n},children:[(0,o.jsxs)("div",{className:"h-14 bg-slate-900 text-white px-4 md:px-5 py-3 flex items-center justify-between border-b border-slate-800",children:[(0,o.jsxs)("div",{className:"flex items-center gap-3",children:[(0,o.jsx)("span",{className:"font-semibold",children:"Edit"}),(0,o.jsx)("span",{className:"text-xs opacity-80",children:"format"})]}),(0,o.jsx)("button",{onClick:v,className:"border border-cyan-400/60 text-cyan-300 hover:bg-cyan-500/10 font-medium py-1.5 px-3 rounded-md",children:"\u8fd0\u884c"})]}),(0,o.jsx)(z,{activeKey:f,onChange:e=>x(e)}),(0,o.jsxs)("div",{className:"flex-1 flex flex-col md:flex-row divide-y md:divide-y-0 md:divide-x divide-slate-200 dark:divide-slate-800",children:[(0,o.jsx)("div",{className:c()("flex-1 md:basis-1/2 flex flex-col min-w-0",{"hidden md:flex":"preview"===f}),children:(0,o.jsx)(l,{value:a,language:"typescript",width:"100%",height:"100%",theme:b,disabled:!1,onChange:e=>s(e||""),onSave:v,options:{fontSize:14,wordWrap:"on",automaticLayout:!0}})}),(0,o.jsx)("div",{className:c()("flex-1 md:basis-1/2 flex flex-col min-w-0",{"hidden md:flex":"editor"===f}),children:(0,o.jsx)("div",{id:"preview",ref:p,className:"flex-1 p-4 overflow-y-auto bg-[#f8f9fa] dark:bg-slate-900 flex flex-col",children:m?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"bg-red-50 dark:bg-red-950/40 text-red-700 dark:text-red-300 p-4 rounded-md border-l-4 border-red-600 dark:border-red-700 font-mono text-sm",children:[(0,o.jsx)("strong",{className:"mr-2",children:"\u6267\u884c\u9519\u8bef:"}),m]}),(0,o.jsx)("pre",{className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-md p-4 font-mono text-sm whitespace-pre-wrap dark:text-slate-100",children:_.tip})]}):i&&i.length>0?i.map(((e,t)=>(0,o.jsx)("div",{className:c()("max-w-[85%] mb-3",{"self-start":!0}),children:(0,o.jsx)(E,{data:e,createAt:Date.now()})},t))):(0,o.jsxs)("div",{className:"max-w-[85%] mb-2 self-start",children:[(0,o.jsx)("div",{className:"p-4 rounded-xl shadow bg-white dark:bg-slate-800 text-gray-800 dark:text-slate-100 border border-gray-200 dark:border-slate-700 rounded-bl-sm",children:(0,o.jsx)("div",{className:"whitespace-pre-wrap",children:'\u8bf7\u70b9\u51fb"\u8fd0\u884c\u4ee3\u7801"\u67e5\u770b AlemonJS \u683c\u5f0f\u7684\u6d88\u606f\u6e32\u67d3\u6548\u679c'})}),(0,o.jsx)("div",{className:"text-xs text-gray-400 dark:text-slate-400 mt-1",children:"\u7b49\u5f85\u8fd0\u884c\u4ee3\u7801..."})]})})})]})]})})}},6120:(e,t,n)=>{"use strict";n.d(t,{u:()=>a});var r=n(6540);const a=(e,t)=>{(0,r.useEffect)((()=>{const n=()=>{const n=document.documentElement.getAttribute(e),r=document.getElementById(t);"dark"===n?r&&r.classList.add("dark"):r&&r.classList.remove("dark")};n();const r=new MutationObserver((()=>{n()}));return r.observe(document.documentElement,{attributes:!0,attributeFilter:[e]}),()=>{r.disconnect()}}),[])}}}]);