(self.webpackChunkalemonjs_docs=self.webpackChunkalemonjs_docs||[]).push([[3903],{3666:(e,n,r)=>{"use strict";r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>u,frontMatter:()=>a,metadata:()=>l,toc:()=>d});var t=r(4848),s=r(8453),o=r(3881);const a={sidebar_position:3},i="\u6d88\u606f\u683c\u5f0f",l={id:"alemonjsDocs/basic/data-type",title:"\u6d88\u606f\u683c\u5f0f",description:"\u4e00\u4e9b\u5e38\u7528\u7684\u6d88\u606f\u683c\u5f0f\u8bf4\u660e",source:"@site/docs/alemonjsDocs/basic/3-data-type.md",sourceDirName:"alemonjsDocs/basic",slug:"/alemonjsDocs/basic/data-type",permalink:"/docs/alemonjsDocs/basic/data-type",draft:!1,unlisted:!1,editUrl:"https://github.com/lemonade-lab/alemonjs-docs/docs/alemonjsDocs/basic/3-data-type.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"\u63a5\u53e3",permalink:"/docs/alemonjsDocs/basic/hook"},next:{title:"\u4e3b\u52a8\u7684",permalink:"/docs/alemonjsDocs/basic/send"}},c={},d=[{value:"Text",id:"text",level:3},{value:"Image",id:"image",level:3},{value:"Mention",id:"mention",level:3},{value:"Button",id:"button",level:3},{value:"MarkDown",id:"markdown",level:3},{value:"Ark",id:"ark",level:3}];function m(e){const n={admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h3:"h3",header:"header",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\u6d88\u606f\u683c\u5f0f",children:"\u6d88\u606f\u683c\u5f0f"})}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsx)(n.p,{children:"\u4e00\u4e9b\u5e38\u7528\u7684\u6d88\u606f\u683c\u5f0f\u8bf4\u660e"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"\u53ef\u80fd\u5b58\u5728\u90e8\u5206\u5e73\u53f0\u4e0d\u652f\u6301\u4e00\u4e9b\u4e2a\u6027\u6548\u679c\uff0c\u5b9e\u9645\u4ee5\u5bf9\u5e94\u5e73\u53f0\u7684\u8981\u6c42\u4e3a\u51c6"}),"\n"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"\u5982\u679c\u60f3\u66f4\u5b9a\u5236\u5316\u53d1\u9001\u6d88\u606f\uff0c\u8bf7\u4e86\u89e3\u5bf9\u5e94\u5e73\u53f0\u5305client\u63a5\u53e3\u8bf4\u660e"}),"\n"]}),"\n","\n",(0,t.jsx)(n.h3,{id:"text",children:"Text"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:'title="src/response/**/*/res.ts"',children:"import { Text, useMessage } from 'alemonjs'\r\nconst selects = onSelects(['message.create'])\r\nexport default onResponse(selects, event => {\r\n  // \u521b\u5efa\r\n  const [message] = useMessage(event)\r\n  message.send(\r\n    format(\r\n      Text('\u8fd9\u4e2a'),\r\n      Text('\u6807\u9898', { style: 'bold' }),\r\n      Text('\u88ab\u52a0\u7c97\u4e86')\r\n    )\r\n  )\r\n  message.send(\r\n    format(Text('\u8fd9\u4e2a'), Text('\u6807\u9898'), Text('\u6ca1\u6709\u53d8\u5316'))\r\n  )\r\n  message.send(\r\n    format(\r\n      Text(`// \u6211\u7684\u4ee3\u7801\u5757 \\nconst Send = useSend(event)`, {\r\n        style: 'block'\r\n      })\r\n    )\r\n  )\r\n})\n"})}),"\n",(0,t.jsx)(o.A,{codeKey:"text"}),"\n",(0,t.jsx)(n.h3,{id:"image",children:"Image"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:'title="src/response/**/*/res.ts"',children:"import { useMessage, Image } from 'alemonjs'\r\nimport jpgURL from '@src/assets/test.jpeg'\r\nimport { readFileSync } from 'node:fs'\r\nconst selects = onSelects(['message.create'])\r\nexport default onResponse(selects, event => {\r\n  const [message] = useMessage(event)\r\n  const { url, file } = Image\r\n  // file\r\n  message.send(format(file(jpgURL)))\r\n  // url\r\n  message.send(format(url('https://xxx.com/yyy.png')))\r\n  // buffer\r\n  const img = readFileSync(jpgURL)\r\n  message.send(format(Image(img)))\r\n})\n"})}),"\n",(0,t.jsx)(n.h3,{id:"mention",children:"Mention"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:'title="response/**/*/res.ts"',children:"import { useMessage, Text, Mention } from 'alemonjs'\r\nconst selects = onSelects(['message.create'])\r\nexport default onResponse(selects, event => {\r\n  const [message] = useMessage(event)\r\n  // \u53d1\u9001\u591a\u79cd\u7c7b\u578b\u7684\u6d88\u606f\r\n  message.send(\r\n    format(\r\n      Text('Hello '),\r\n      Mention(event.UserId),\r\n      Text(', How are things going?')\r\n    )\r\n  )\r\n  // @ \u6240\u6709\u4eba\r\n  message.send(format(Mention()))\r\n  // @ channel\r\n  message.send(\r\n    format(\r\n      Mention(event.ChannelId, {\r\n        belong: 'channel'\r\n      })\r\n    )\r\n  )\r\n})\n"})}),"\n",(0,t.jsx)(o.A,{codeKey:"mention"}),"\n",(0,t.jsx)(n.h3,{id:"button",children:"Button"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import { BT, useMessage } from 'alemonjs'\r\nconst selects = onSelects(['message.create'])\r\nconst response = onResponse(selects, event => {\r\n  const [message] = useMessage(event)\r\n\r\n  const { group, row } = BT\r\n\r\n  // \u4e00\u884c\u591a\u4e2a\r\n  message.send(\r\n    format(\r\n      group(\r\n        row(\r\n          BT('\u5f00\u59cb', '/\u5f00\u59cb\u6e38\u620f'),\r\n          BT('\u7ed3\u675f', '/\u7ed3\u675f\u6e38\u620f')\r\n        )\r\n      )\r\n    )\r\n  )\r\n\r\n  // \u591a\u884c\u591a\u4e2a\r\n  message.send(\r\n    format(\r\n      group(\r\n        row(\r\n          BT('\u5f00\u59cb', '/\u5f00\u59cb\u6e38\u620f'),\r\n          BT('\u7ed3\u675f', '/\u7ed3\u675f\u6e38\u620f')\r\n        ),\r\n        row(\r\n          BT('\u9000\u51fa', '/\u9000\u51fa\u6e38\u620f'),\r\n          BT('\u6ce8\u9500', '/\u6ce8\u9500\u8d26\u6237')\r\n        )\r\n      )\r\n    )\r\n  )\r\n\r\n  // \u66f4\u591a\u7c7b\u578b\r\n  message.send(\r\n    format(\r\n      group(\r\n        // link\r\n        row(\r\n          BT('\u8bbf\u95ee\u6587\u6863', 'https://alemonjs.com/', {\r\n            type: 'link'\r\n          })\r\n        ),\r\n        row(\r\n          BT('\u662f\u5426\u540c\u610f', '/\u540c\u610f', {\r\n            type: 'call'\r\n          })\r\n        ),\r\n        // \u81ea\u52a8\u53d1\u9001 + \u663e\u793a\u5b57\u9891\u9053list + \u7981\u7528\u63d0\u793a\r\n        row(\r\n          BT('\u54c8\u54c8', '/\u54c8\u54c8', {\r\n            autoEnter: false,\r\n            showList: true,\r\n            toolTip: '\u4e0d\u652f\u6301'\r\n          })\r\n        )\r\n      )\r\n    )\r\n  )\r\n\r\n  const { template } = BT\r\n\r\n  // \u4f7f\u7528\u7533\u8bf7\u597d\u7684\u6a21\u677f\uff08\u7279\u5b9a\u5e73\u53f0\u4e0b\u4f7f\u7528\uff09\r\n  message.send(format(template('template_id')))\r\n\r\n  // \u5411\u7533\u8bf7\u7684\u6a21\u677f\u6ce8\u5165\u53c2\u6570\r\n  message.send(format(template('template_id')))\r\n})\r\nexport default response\n"})}),"\n",(0,t.jsx)(o.A,{codeKey:"button",minHeight:"22rem"}),"\n",(0,t.jsx)(n.h3,{id:"markdown",children:"MarkDown"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import { MD, useMessage } from 'alemonjs'\r\nconst selects = onSelects(['message.create'])\r\nconst response = onResponse(selects, event => {\r\n  const [message] = useMessage(event)\r\n\r\n  const {\r\n    text,\r\n    title,\r\n    bold,\r\n    italicStar,\r\n    strikethrough,\r\n    link,\r\n    image,\r\n    list,\r\n    listItem,\r\n    blockquote,\r\n    divider,\r\n    newline\r\n  } = MD\r\n\r\n  message.send(\r\n    format(\r\n      MD(\r\n        // \u6807\u9898\r\n        title('\u6807\u9898\uff01\uff01'),\r\n        // \u526f\u6807\u9898\r\n        subtitle('\u5b50\u6807\u9898'),\r\n        text('\u666e\u901a\u6587\u672c'),\r\n        // \u52a0\u7c97\r\n        bold('\u52a0\u7c97'),\r\n        // \u659c\u4f53\r\n        italic('\u659c\u4f53'),\r\n        // \u661f\u53f7\u659c\u4f53\r\n        italicStar('\u661f\u53f7\u659c\u4f53'),\r\n        // \u5220\u9664\u7ebf\r\n        strikethrough('\u5220\u9664\u7ebf'),\r\n        // \u94fe\u63a5\r\n        link('\u94fe\u63a5', 'https://www.baidu.com'),\r\n        // \u56fe\u7247\r\n        image('https://www.baidu.com/img/bd_logo1.png', {\r\n          width: 100,\r\n          height: 100\r\n        }),\r\n        // \u6709\u5e8f\u5217\u8868\r\n        list(\r\n          listItem(1, '\u6709\u5e8f\u5217\u8868'),\r\n          listItem(2, '\u6709\u5e8f\u5217\u8868'),\r\n          listItem(3, '\u6709\u5e8f\u5217\u8868'),\r\n          listItem(4, '\u6709\u5e8f\u5217\u8868')\r\n        ),\r\n        // \u65e0\u5e8f\u5217\u8868\r\n        list(\r\n          listItem('\u65e0\u5e8f\u5217\u8868'),\r\n          listItem('\u65e0\u5e8f\u5217\u8868'),\r\n          listItem('\u65e0\u5e8f\u5217\u8868'),\r\n          listItem('\u65e0\u5e8f\u5217\u8868'),\r\n          listItem('\u65e0\u5e8f\u5217\u8868')\r\n        ),\r\n        // \u5757\u5f15\u7528\r\n        blockquote('\u5757\u5f15\u7528'),\r\n        // \u6c34\u5e73\u5206\u5272\u7ebf\r\n        divider(),\r\n        // \u6362\u884c\r\n        newline(),\r\n        // \u6362\u591a\u884c\r\n        newline(true)\r\n      )\r\n    )\r\n  )\r\n\r\n  const { template } = MD\r\n\r\n  // \u5411\u7533\u8bf7\u7684\u6a21\u677f\u6ce8\u5165\u53c2\u6570\r\n  message.send(\r\n    format(template('template_id', { title: '\u4f60\u597d' }))\r\n  )\r\n})\r\nexport default response\n"})}),"\n",(0,t.jsx)(o.A,{codeKey:"md",minHeight:"45rem"}),"\n",(0,t.jsx)(n.h3,{id:"ark",children:"Ark"}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"\u5b9e\u9a8c\u6027\u529f\u80fd"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",metastring:'title="response/**/*/res.ts"',children:"import { Ark, useMessage } from 'alemonjs'\r\nconst selects = onSelects(['message.create'])\r\nexport default onResponse(selects, event => {\r\n  const [message] = useMessage(event)\r\n\r\n  const { Card, BigCard } = Ark\r\n\r\n  // \u666e\u901a\u5361\u7247\r\n  message.send(\r\n    format(\r\n      Card({\r\n        decs: '\u4f60\u662f\u8c01',\r\n        title: '\u6536\u4f60\u6765\u5566',\r\n        prompt: '\u901a\u77e5\u4fe1\u606f\uff01\uff01',\r\n        metadecs: '\u963f\u67e0\u6aac2\u6b63\u5f0f\u7248\u53d1\u9001',\r\n        cover:\r\n          'https://pub.idqqimg.com/pc/misc/files/20190820/2f4e70ae3355ece23d161cf5334d4fc1jzjfmtep.png',\r\n        link: '',\r\n        subtitle: '\u8d5e\u8d5e\u8d5e'\r\n      })\r\n    )\r\n  )\r\n\r\n  // \u5927\u56fe\u5361\u7247\r\n  message.send(\r\n    format(\r\n      BigCard({\r\n        title: '\u6536\u4f60\u6765\u5566',\r\n        prompt: '\u901a\u77e5\u4fe1\u606f\uff01\uff01',\r\n        cover:\r\n          'https://pub.idqqimg.com/pc/misc/files/20190820/2f4e70ae3355ece23d161cf5334d4fc1jzjfmtep.png',\r\n        link: '',\r\n        subtitle: '\u8d5e\u8d5e\u8d5e'\r\n      })\r\n    )\r\n  )\r\n\r\n  const { listTip, list, listContent, listItem } = Ark\r\n\r\n  // \u5217\u8868\r\n  message.send(\r\n    format(\r\n      list(\r\n        listTip({\r\n          desc: '\u72b6\u6001\u626d\u8f6c',\r\n          prompt: '\u72b6\u6001\u626d\u8f6c'\r\n        }),\r\n        listContent(\r\n          listItem('\u9700\u6c42\u6807\u9898\uff1aUI\u95ee\u9898\u89e3\u51b3'),\r\n          listItem('\u70b9\u51fb\u4e0b\u5217\u52a8\u4f5c\u76f4\u63a5\u626d\u8f6c\u72b6\u6001\u5230\uff1a'),\r\n          listItem({\r\n            title: '\u72b6\u60011',\r\n            link: 'https://alemonjs.com?status=1'\r\n          }),\r\n          listItem({\r\n            title: '\u72b6\u60012',\r\n            link: 'https://alemonjs.com?status=2'\r\n          }),\r\n          listItem('\u8bf7\u5173\u6ce8')\r\n        )\r\n      )\r\n    )\r\n  )\r\n})\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(m,{...e})}):m(e)}},7845:e=>{function n(e){return Promise.resolve().then((()=>{var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}))}n.keys=()=>[],n.resolve=n,n.id=7845,e.exports=n},3881:(e,n,r)=>{"use strict";r.d(n,{A:()=>C});var t=r(6540),s=r(8553);const o={minimap:{enabled:!1},scrollBeyondLastLine:!1,fontSize:14,lineHeight:20,wordWrap:"on",automaticLayout:!0,suggestOnTriggerCharacters:!0,quickSuggestions:!0,parameterHints:{enabled:!0},hover:{enabled:!0},folding:!0,foldingStrategy:"indentation",lineNumbers:"on",selectOnLineNumbers:!0,cursorBlinking:"blink",cursorSmoothCaretAnimation:"on",tabSize:2,insertSpaces:!0,detectIndentation:!0,bracketPairColorization:{enabled:!0},autoSave:"off",readOnly:!1,contextmenu:!0,renderLineHighlight:"all",multiCursorModifier:"alt",find:{addExtraSpaceOnTop:!1,autoFindInSelection:"never",seedSearchStringFromSelection:"never"}};var a=r(4848);const i=e=>{const{disabled:n,onSave:r,value:i,language:l,width:c,height:d,onChange:m,theme:u,...p}=e,h=((e,n)=>({beforeMount:e=>{e.editor.defineTheme("zh-theme",{base:"vs-dark"===n?"vs-dark":"vs",inherit:!0,rules:[],colors:{}})},onMount:(r,t)=>{t.editor.setModelLanguage(r.getModel(),e),r.updateOptions({...o,language:e,theme:"vs-dark"===n?"vs-dark":"vs"});try{const e=(e,n,t,s)=>{r.addAction({id:e,label:n,contextMenuGroupId:s,run:e=>{e.trigger("keyboard",t,{})}})};e("zh-undo","\u64a4\u9500","undo","1_modification"),e("zh-cut","\u526a\u5207","editor.action.clipboardCutAction","1_modification"),e("zh-copy","\u590d\u5236","editor.action.clipboardCopyAction","1_modification"),e("zh-paste","\u7c98\u8d34","editor.action.clipboardPasteAction","1_modification"),e("zh-select-all","\u5168\u9009","editor.action.selectAll","9_cutcopypaste"),e("zh-redo","\u91cd\u505a","redo","1_modification"),e("zh-find","\u67e5\u627e","actions.find","4_find"),e("zh-replace","\u66ff\u6362","editor.action.startFindReplaceAction","4_find"),e("zh-find-next","\u67e5\u627e\u4e0b\u4e00\u4e2a","editor.action.nextMatchFindAction","4_find"),e("zh-find-prev","\u67e5\u627e\u4e0a\u4e00\u4e2a","editor.action.previousMatchFindAction","4_find"),e("zh-format","\u683c\u5f0f\u5316\u6587\u6863","editor.action.formatDocument","6_cc"),e("zh-format-selection","\u683c\u5f0f\u5316\u9009\u4e2d\u5185\u5bb9","editor.action.formatSelection","6_cc"),e("zh-indent","\u589e\u52a0\u7f29\u8fdb","editor.action.indentLines","2_cc"),e("zh-outdent","\u51cf\u5c11\u7f29\u8fdb","editor.action.outdentLines","2_cc"),e("zh-move-line-up","\u5411\u4e0a\u79fb\u52a8\u884c","editor.action.moveLinesUpAction","2_cc"),e("zh-move-line-down","\u5411\u4e0b\u79fb\u52a8\u884c","editor.action.moveLinesDownAction","2_cc"),e("zh-copy-line-up","\u5411\u4e0a\u590d\u5236\u884c","editor.action.copyLinesUpAction","2_cc"),e("zh-copy-line-down","\u5411\u4e0b\u590d\u5236\u884c","editor.action.copyLinesDownAction","2_cc"),e("zh-delete-line","\u5220\u9664\u884c","editor.action.deleteLines","2_cc"),e("zh-insert-line-below","\u5728\u4e0b\u65b9\u63d2\u5165\u884c","editor.action.insertLineAfter","2_cc"),e("zh-insert-line-above","\u5728\u4e0a\u65b9\u63d2\u5165\u884c","editor.action.insertLineBefore","2_cc")}catch(s){console.warn("MonacoEditor\u4e2d\u6587\u83dc\u5355\u914d\u7f6e\u5931\u8d25:",s)}},options:{...o,language:e,theme:"vs-dark"===n?"vs-dark":"vs"}}))(l,u);return(0,t.useEffect)((()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"s"===e.key&&(e.preventDefault(),n||r())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}}),[n,r,i,l,c,d,m,u]),(0,a.jsx)(s.Ay,{value:i,language:l,width:c,height:d,onChange:m,theme:u,...h,...p})};var l=r(6942),c=r.n(l),d=r(6120),m=r(4353),u=r.n(m),p=r(8287),h=r(4819),x=r(9078);const g=new Map;function f(){if(g.size<=120)return;const e=Array.from(g.entries()).sort(((e,n)=>e[1].ts-n[1].ts));for(;e.length&&g.size>Math.floor(108);){const[n,r]=e.shift();URL.revokeObjectURL(r.url),g.delete(n)}}function b(e,n){try{const r=atob(e),t=r.length,s=new Uint8Array(t);for(let e=0;e<t;e++)s[e]=r.charCodeAt(e);return new Blob([s],{type:n})}catch{return new Blob}}function v(e){if(null==e)return"";if("string"==typeof e)return e;try{return JSON.stringify(e)}catch{try{return String(e)}catch{return""}}}function j(e){return"string"==typeof e&&/^https?:\/\//i.test(e)}const w={bold:e=>(0,a.jsx)("strong",{children:e}),italic:e=>(0,a.jsx)("em",{children:e}),boldItalic:e=>(0,a.jsx)("strong",{children:(0,a.jsx)("em",{children:e})}),block:e=>(0,a.jsx)("div",{className:"block",children:e}),strikethrough:e=>(0,a.jsx)("s",{children:e}),none:e=>e,default:e=>e},y={all:()=>(0,a.jsx)("strong",{children:"@\u5168\u4f53\u6210\u5458"}),everyone:()=>(0,a.jsx)("strong",{children:"@\u5168\u4f53\u6210\u5458"}),"\u5168\u4f53\u6210\u5458":()=>(0,a.jsx)("strong",{children:"@\u5168\u4f53\u6210\u5458"}),channel:e=>(0,a.jsxs)("strong",{children:["#",e]}),user:(e,n)=>(0,a.jsxs)("strong",{children:["@",n||e]}),guild:e=>(0,a.jsxs)("strong",{children:["#",e]}),default:()=>(0,a.jsx)("span",{})},k={"MD.title":e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-xl font-bold",children:v(e.value).slice(0,200)}),(0,a.jsx)("br",{})]}),"MD.subtitle":e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:"text-lg font-semibold",children:v(e.value).slice(0,200)}),(0,a.jsx)("br",{})]}),"MD.blockquote":e=>(0,a.jsx)("blockquote",{children:v(e.value).slice(0,500)}),"MD.bold":e=>(0,a.jsx)("strong",{className:"px-1 py-0.5 rounded-md shadow-inner",children:v(e.value).slice(0,500)}),"MD.divider":()=>(0,a.jsx)("hr",{}),"MD.text":e=>(0,a.jsx)("span",{children:v(e.value).slice(0,2e3)}),"MD.link":e=>{const n=v(e.value?.url).slice(0,1e3),r=v(e.value?.text).slice(0,200);return j(n)?(0,a.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:r||n}):null},"MD.image":e=>{const n=v(e.value);if(!j(n))return null;const r=Number(e.options?.width)||100,t=Number(e.options?.height)||100;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.A,{style:{width:`${r}px`,height:`${t}px`},className:"max-w-[15rem] xl:max-w-[20rem] rounded-md",src:n,alt:"image"}),(0,a.jsx)("br",{})]})},"MD.italic":e=>(0,a.jsx)("em",{children:v(e.value).slice(0,500)}),"MD.italicStar":e=>(0,a.jsx)("em",{className:"italic",children:v(e.value).slice(0,500)}),"MD.strikethrough":e=>(0,a.jsx)("s",{children:v(e.value).slice(0,500)}),"MD.newline":()=>(0,a.jsx)("br",{}),"MD.list":e=>{const n=Array.isArray(e.value)?e.value:[];return(0,a.jsx)("ul",{className:"list-disc ml-4",children:n.slice(0,200).map(((e,n)=>{const r=v(e?.value?.text||e?.value||e).slice(0,500);return(0,a.jsx)("li",{children:r},n)}))})},"MD.template":()=>(0,a.jsx)("span",{children:"\u6682\u4e0d\u652f\u6301\u6a21\u677f"})},M={"Ark.BigCard":()=>(0,a.jsx)("div",{children:"\u6682\u4e0d\u652f\u6301 Ark.BigCard"}),"Ark.Card":()=>(0,a.jsx)("div",{children:"\u6682\u4e0d\u652f\u6301 Ark.Card"}),"Ark.list":()=>(0,a.jsx)("div",{children:"\u6682\u4e0d\u652f\u6301 Ark.list"}),ImageFile:()=>(0,a.jsx)("div",{children:"\u6682\u4e0d\u652f\u6301\u6587\u4ef6\u56fe\u7247"}),"MD.template":()=>(0,a.jsx)("div",{children:"\u6682\u4e0d\u652f\u6301"})},A=e=>{try{const r=e?.value;if(!r)return null;let t;if(Array.isArray(r))t=p.hp.from(r);else{if("string"!=typeof r)return null;{const e=(n=r)?n.length>2097152?null:n:null;if(!e)return(0,a.jsx)("span",{children:"\u56fe\u7247\u592a\u5927\u6216\u65e0\u6548"});t=p.hp.from(e,"base64")}}const s=`data:image/png;base64,${t.toString("base64")}`;return(0,a.jsx)(h.A,{className:"max-w-[15rem] xl:max-w-[20rem] rounded-md",src:s,alt:"Image"})}catch(r){return console.warn("renderImage error",r),(0,a.jsx)("span",{children:"\u56fe\u7247\u89e3\u6790\u5931\u8d25"})}var n},D=(e,n,r)=>{try{if(e?.options?.template_id)return(0,a.jsx)("div",{children:"\u6682\u4e0d\u652f\u6301\u6309\u94ae\u6a21\u677f"});const t=e?.value;return Array.isArray(t)?(0,a.jsx)("div",{className:"flex flex-col gap-3",children:t.slice(0,20).map(((e,t)=>{const s=Array.isArray(e?.value)?e.value:[];return(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:s.slice(0,30).map(((e,t)=>{const s="string"==typeof e?.value?{label:e.value,title:e.value}:e?.value||{label:"Button",title:""},o=!!e?.options?.autoEnter,i="string"==typeof e?.options?.data?{click:e.options.data}:e?.options?.data||{},l=v(s.label).slice(0,40)||"Button";return(0,a.jsx)(x.Ay,{onClick:e=>{e.stopPropagation(),e.preventDefault(),o?n(v(i.click).slice(0,2e3)):r(v(i.click).slice(0,2e3))},children:l},t)}))},t)}))}):(0,a.jsx)("div",{children:"\u6309\u94ae\u6570\u636e\u9519\u8bef"})}catch(t){return console.warn("renderButtonGroup error",t),(0,a.jsx)("div",{children:"\u6309\u94ae\u6e32\u67d3\u5931\u8d25"})}},T={Text:e=>{try{let n=v(e?.value).slice(0,5e3);if(!n)return null;const r=v(e?.options?.style)||"default",t=w[r]||w.default,s=n.split("\n"),o=s.length>1?(0,a.jsx)("span",{children:s.map(((e,n)=>(0,a.jsxs)("span",{children:[e,(0,a.jsx)("br",{})]},n)))}):n;return(0,a.jsx)("span",{children:t(o)})}catch(n){return console.warn("renderText error",n),(0,a.jsx)("span",{children:"\u6587\u672c\u9519\u8bef"})}},Mention:e=>{try{const n=v(e?.value);if(!n)return null;if(["all","everyone","\u5168\u4f53\u6210\u5458"].includes(n))return(0,a.jsx)("span",{children:y[n]?.(n)||y.all(n)});const r=v(e?.options?.belong)||"default",t=e?.options?.payload?.name,s=y[r]||y.default;return(0,a.jsx)("span",{children:s(n,t)})}catch(n){return console.warn("renderMention error",n),null}},Image:A,ImageURL:e=>{try{const n=v(e?.value);if(!n)return null;if(n.startsWith("base64://")){const e=n.replace("base64://","");return A({value:e})}return j(n)?(0,a.jsx)(h.A,{className:"max-w-[15rem] xl:max-w-[20rem] rounded-md",src:n,alt:"ImageURL"}):null}catch(n){return console.warn("renderImageURL error",n),(0,a.jsx)("span",{children:"\u56fe\u7247\u5730\u5740\u65e0\u6548"})}},ImageRef:e=>{try{const n=e?.value?.hash;if(!n)return(0,a.jsx)("span",{children:"\u56fe\u7247\u5f15\u7528\u7f3a\u5931"});const r=function(e){const n=g.get(e);if(n)return n.ts=Date.now(),n.url;try{const n=localStorage.getItem("img:"+e);if(n){const r=b(n,"image/png"),t=URL.createObjectURL(r);return g.set(e,{url:t,size:n.length,ts:Date.now()}),f(),t}}catch{}}(n);return r?(0,a.jsx)(h.A,{className:"max-w-[15rem] xl:max-w-[20rem] rounded-md",src:r,alt:"ImageRef"}):(0,a.jsx)("span",{children:"\u56fe\u7247\u5df2\u91ca\u653e"})}catch(n){return console.warn("render ImageRef error",n),(0,a.jsx)("span",{children:"\u56fe\u7247\u5f15\u7528\u9519\u8bef"})}},"BT.group":e=>(0,a.jsx)(a.Fragment,{children:D(e,(()=>{}),(()=>{}))})},N={Markdown:e=>{try{const n=Array.isArray(e?.value)?e.value:[];return(0,a.jsx)("div",{className:"mb-2",children:n.slice(0,200).map(((e,n)=>{if(!e||"object"!=typeof e)return null;const r=v(e.type),t=k[r];if(!t)return null;try{return t(e)}catch(s){return console.warn("markdown item render error",s),null}}))})}catch(n){return console.warn("renderMarkdown error",n),(0,a.jsx)("div",{children:"Markdown \u6570\u636e\u9519\u8bef"})}},"MD.title":e=>k["MD.title"](e),"MD.subtitle":e=>k["MD.subtitle"](e),"MD.blockquote":e=>k["MD.blockquote"](e),"MD.bold":e=>k["MD.bold"](e),"MD.divider":e=>k["MD.divider"](e),"MD.text":e=>k["MD.text"](e),"MD.link":e=>k["MD.link"](e),"MD.image":e=>k["MD.image"](e),"MD.italic":e=>k["MD.italic"](e),"MD.italicStar":e=>k["MD.italicStar"](e),"MD.strikethrough":e=>k["MD.strikethrough"](e),"MD.newline":e=>k["MD.newline"](e),"MD.list":e=>k["MD.list"](e)},S=e=>{let{data:n,createAt:r,onSend:s,onInput:o}=e;const i=s||(()=>{}),l=o||(()=>{}),c=(0,t.useMemo)((()=>{const e="number"==typeof r&&isFinite(r)?r:Date.now();return u()(e).format("YYYY-MM-DD HH:mm:ss")}),[r]),d=(0,t.useMemo)((()=>Array.isArray(n)?n.map(((e,n)=>{const r=(t=e,"[object Object]"===Object.prototype.toString.call(t)?e:{type:"Text",value:v(e)});var t;const s=v(r.type).trim();if(!s)return null;try{if("BT.group"===s)return(0,a.jsx)("div",{children:D(r,i,l)},n);const e=T[s];if(e)return e(r);const t=N[s];if(t)return t(r);const o=M[s];return o?o():null}catch(o){return console.warn("render item error",s,o),null}})):null),[n,i,l]);return(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsxs)("div",{className:"message-bubble rounded-md py-1 flex flex-col relative px-2 shadow-md bg-[var(--panel-background)]",children:[(0,a.jsx)("div",{children:d}),(0,a.jsx)("span",{className:"absolute -bottom-3 whitespace-nowrap right-0 text-[0.5rem]",children:c})]})})},I=(0,t.memo)(S);var L=r(2823);const _={default:"import { format, Text } from 'alemonjs';\n\nconst App = () => {\n    return format(\n        Text(\"Hello Word!\")\n    )\n}\nexport default App;",tip:"import { format, Text } from 'alemonjs';\n\nconst App = () => {\n    return format(\n        Text(\"Hello Word!\")\n    )\n}\nexport default App;",text:"import { format, Text } from 'alemonjs';\n\nconst App = () => {\n    return format(\n        Text('\u8fd9\u4e2a'),\n        Text('\u6807\u9898', { style: 'bold' }),\n        Text('\u88ab\u52a0\u7c97\u4e86')\n    )\n}\nexport default App;",mention:"import { format, Text, Mention } from 'alemonjs';\n\nconst App = () => {\n    return format(\n        Text('Hello '),\n        Mention('\u67e0\u6aac\u51b2\u6c34'),\n        Text(', How are things going?')\n    )\n}\nexport default App;",button:"import { format, BT } from 'alemonjs';\n\nconst App = () => {\n    const { group, row } = BT\n    return format(\n        group(\n            row(\n                BT('\u5f00\u59cb', '/\u5f00\u59cb\u6e38\u620f'),\n                BT('\u7ed3\u675f', '/\u7ed3\u675f\u6e38\u620f')\n            )\n        )\n    )\n}\nexport default App;",md:"import { format, MD } from 'alemonjs';\n\nconst { text, title, bold, italicStar,\n    strikethrough, link, image, blockquote,\n    divider, subtitle, italic, newline\n} = MD\n\nconst App = () => {\n    return format(\n        MD(\n            title('\u6807\u9898\uff01\uff01'),\n            subtitle('\u5b50\u6807\u9898'),\n            text('\u666e\u901a\u6587\u672c'), bold('\u52a0\u7c97'),\n            newline(),\n            italic('\u659c\u4f53'), italicStar('\u661f\u53f7\u659c\u4f53'), strikethrough('\u5220\u9664\u7ebf'),\n            image('https://www.baidu.com/img/bd_logo1.png', {\n                width: 200,\n                height: 100\n            }),\n            link('\u767e\u5ea6\u4e00\u4e0b', 'https://www.baidu.com'),\n            blockquote('\u5757\u5f15\u7528'),\n            divider()\n        )\n    )\n}\nexport default App;"};var B=r(9293);const z=e=>{let{activeKey:n,onChange:r,className:t}=e;return(0,a.jsx)("div",{className:`md:hidden flex border-b border-slate-200 dark:border-slate-800 ${t||""}`,children:(0,a.jsx)(B.A,{activeKey:n,onChange:e=>r(e),className:"w-full m-0",items:[{key:"editor",label:"\u7f16\u8f91"},{key:"preview",label:"\u9884\u89c8"}],centered:!0})})},C=e=>{let{codeKey:n,minHeight:r}=e;const[s,o]=(0,t.useState)(_[n]??_.default),[l,m]=(0,t.useState)(null),[u,p]=(0,t.useState)(null),h=(0,t.useRef)(null),[x,g]=(0,t.useState)("editor");(0,d.u)("data-theme","alemon-bubble-preview");const[f,b]=(0,t.useState)("vs");function v(){p(null);try{const e=s.trim().replace(/import\s+{[^}]*}\s+from\s+['"]alemonjs['"];?/g,"").replace(/export\s+default\s+App;?/g,""),n={...L,console:console},r=Object.keys(n),t=Object.values(n),o=`\n                "use strict";\n                ${e}\n                return App();\n            `,a=new Function(...r,o)(...t);if(!Array.isArray(a))throw new Error("App \u5fc5\u987b\u8fd4\u56de format(...) \u7684\u7ed3\u679c\uff08DataEnums[] \u6216 DataEnums[][]\uff09");let i=[];if(0===a.length)i=[];else if(Array.isArray(a[0]))i=a.filter(Array.isArray);else{if("object"!=typeof a[0]||!a[0]||!("type"in a[0]))throw new Error("\u65e0\u6cd5\u8bc6\u522b\u8fd4\u56de\u7684\u6570\u636e\u7ed3\u6784\uff0c\u8bf7\u8fd4\u56de format(...) \u7684\u7ed3\u679c\uff08DataEnums[] \u6216 DataEnums[][]\uff09");i=[a]}m(i),0===i.length&&p("\u4ee3\u7801\u6267\u884c\u6210\u529f\uff0c\u4f46\u8fd4\u56de\u4e86\u7a7a\u7ed3\u679c")}catch(e){console.error("AlemonJS \u4ee3\u7801\u6267\u884c\u9519\u8bef:",e),m(null),p(e?.message||String(e))}}return(0,t.useEffect)((()=>{if("undefined"==typeof document)return;const e=()=>{const e=document.documentElement.getAttribute("data-theme");b("dark"===e?"vs-dark":"vs")};e();const n=new MutationObserver(e);return n.observe(document.documentElement,{attributes:!0,attributeFilter:["data-theme"]}),()=>n.disconnect()}),[]),(0,t.useEffect)((()=>{h.current&&(h.current.scrollTop=h.current.scrollHeight)}),[l,u]),(0,t.useEffect)((()=>{v()}),[]),(0,t.useEffect)((()=>{const e=e=>{(e.ctrlKey||e.metaKey)&&"Enter"===e.key&&(e.preventDefault(),v())};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[s]),(0,a.jsx)("div",{id:"alemon-bubble-preview",className:"font-sans ",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto bg-white dark:bg-slate-900 rounded-xl shadow-lg overflow-hidden flex flex-col min-h-[18rem]",style:{minHeight:r},children:[(0,a.jsxs)("div",{className:"h-14 bg-slate-900 text-white px-4 md:px-5 py-3 flex items-center justify-between border-b border-slate-800",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"font-semibold",children:"Edit"}),(0,a.jsx)("span",{className:"text-xs opacity-80",children:"format"})]}),(0,a.jsx)("button",{onClick:v,className:"border border-cyan-400/60 text-cyan-300 hover:bg-cyan-500/10 font-medium py-1.5 px-3 rounded-md",children:"\u8fd0\u884c"})]}),(0,a.jsx)(z,{activeKey:x,onChange:e=>g(e)}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col md:flex-row divide-y md:divide-y-0 md:divide-x divide-slate-200 dark:divide-slate-800",children:[(0,a.jsx)("div",{className:c()("flex-1 md:basis-1/2 flex flex-col min-w-0",{"hidden md:flex":"preview"===x}),children:(0,a.jsx)(i,{value:s,language:"typescript",width:"100%",height:"100%",theme:f,disabled:!1,onChange:e=>o(e||""),onSave:v,options:{fontSize:14,wordWrap:"on",automaticLayout:!0}})}),(0,a.jsx)("div",{className:c()("flex-1 md:basis-1/2 flex flex-col min-w-0",{"hidden md:flex":"editor"===x}),children:(0,a.jsx)("div",{id:"preview",ref:h,className:"flex-1 p-4 overflow-y-auto bg-[#f8f9fa] dark:bg-slate-900 flex flex-col",children:u?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"bg-red-50 dark:bg-red-950/40 text-red-700 dark:text-red-300 p-4 rounded-md border-l-4 border-red-600 dark:border-red-700 font-mono text-sm",children:[(0,a.jsx)("strong",{className:"mr-2",children:"\u6267\u884c\u9519\u8bef:"}),u]}),(0,a.jsx)("pre",{className:"bg-gray-100 dark:bg-slate-800 border border-gray-200 dark:border-slate-700 rounded-md p-4 font-mono text-sm whitespace-pre-wrap dark:text-slate-100",children:_.tip})]}):l&&l.length>0?l.map(((e,n)=>(0,a.jsx)("div",{className:c()("max-w-[85%] mb-3",{"self-start":!0}),children:(0,a.jsx)(I,{data:e,createAt:Date.now()})},n))):(0,a.jsxs)("div",{className:"max-w-[85%] mb-2 self-start",children:[(0,a.jsx)("div",{className:"p-4 rounded-xl shadow bg-white dark:bg-slate-800 text-gray-800 dark:text-slate-100 border border-gray-200 dark:border-slate-700 rounded-bl-sm",children:(0,a.jsx)("div",{className:"whitespace-pre-wrap",children:'\u8bf7\u70b9\u51fb"\u8fd0\u884c\u4ee3\u7801"\u67e5\u770b AlemonJS \u683c\u5f0f\u7684\u6d88\u606f\u6e32\u67d3\u6548\u679c'})}),(0,a.jsx)("div",{className:"text-xs text-gray-400 dark:text-slate-400 mt-1",children:"\u7b49\u5f85\u8fd0\u884c\u4ee3\u7801..."})]})})})]})]})})}},6120:(e,n,r)=>{"use strict";r.d(n,{u:()=>s});var t=r(6540);const s=(e,n)=>{(0,t.useEffect)((()=>{const r=()=>{const r=document.documentElement.getAttribute(e),t=document.getElementById(n);"dark"===r?t&&t.classList.add("dark"):t&&t.classList.remove("dark")};r();const t=new MutationObserver((()=>{r()}));return t.observe(document.documentElement,{attributes:!0,attributeFilter:[e]}),()=>{t.disconnect()}}),[])}}}]);